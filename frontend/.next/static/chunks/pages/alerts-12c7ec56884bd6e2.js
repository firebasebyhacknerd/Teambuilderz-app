(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[233],{3454:function(e,t,r){"use strict";var s,n;e.exports=(null==(s=r.g.process)?void 0:s.env)&&"object"==typeof(null==(n=r.g.process)?void 0:n.env)?r.g.process:r(7663)},8881:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/alerts",function(){return r(564)}])},2902:function(e,t,r){"use strict";var s=r(5893);t.Z=e=>{let{children:t,onClick:r,type:n="submit",disabled:l=!1}=e;return(0,s.jsx)("button",{type:n,onClick:r,disabled:l,className:"w-full py-3 rounded-xl shadow-lg text-base font-medium text-white transition duration-150 ease-in-out bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-4 focus:ring-blue-300 disabled:opacity-50 disabled:cursor-not-allowed "+(l?"cursor-not-allowed":""),children:t})}},5965:function(e,t,r){"use strict";var s=r(5893);t.Z=e=>{let{children:t,className:r=""}=e;return(0,s.jsx)("div",{className:"bg-white/70 backdrop-blur-xl p-6 rounded-3xl shadow-lg border border-white/80 transition-all duration-300 "+r,children:t})}},610:function(e,t,r){"use strict";let s=r(3454).env.NEXT_PUBLIC_API_URL||"http://localhost:3001";t.Z=s},1134:function(e,t,r){"use strict";r.d(t,{Z:function(){return u}});var s=r(7294);let n=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),l=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,r)=>r?r.toUpperCase():t.toLowerCase()),a=e=>{let t=l(e);return t.charAt(0).toUpperCase()+t.slice(1)},i=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.filter((e,t,r)=>!!e&&""!==e.trim()&&r.indexOf(e)===t).join(" ").trim()},c=e=>{for(let t in e)if(t.startsWith("aria-")||"role"===t||"title"===t)return!0};var o={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let d=(0,s.forwardRef)((e,t)=>{let{color:r="currentColor",size:n=24,strokeWidth:l=2,absoluteStrokeWidth:a,className:d="",children:u,iconNode:x,...h}=e;return(0,s.createElement)("svg",{ref:t,...o,width:n,height:n,stroke:r,strokeWidth:a?24*Number(l)/Number(n):l,className:i("lucide",d),...!u&&!c(h)&&{"aria-hidden":"true"},...h},[...x.map(e=>{let[t,r]=e;return(0,s.createElement)(t,r)}),...Array.isArray(u)?u:[u]])}),u=(e,t)=>{let r=(0,s.forwardRef)((r,l)=>{let{className:c,...o}=r;return(0,s.createElement)(d,{ref:l,iconNode:t,className:i("lucide-".concat(n(a(e))),"lucide-".concat(e),c),...o})});return r.displayName=a(e),r}},3346:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});let s=(0,r(1134).Z)("calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]])},3050:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});let s=(0,r(1134).Z)("circle-check-big",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},39:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});let s=(0,r(1134).Z)("clock",[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]])},113:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});let s=(0,r(1134).Z)("target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]])},2542:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});let s=(0,r(1134).Z)("triangle-alert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]])},564:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return p}});var s=r(5893),n=r(7294),l=r(5965),a=r(2902),i=r(113),c=r(39),o=r(3346),d=r(2542);let u=(0,r(1134).Z)("bell",[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]]);var x=r(3050),h=r(1163),m=r(610),p=()=>{let e=(0,h.useRouter)(),[t,r]=(0,n.useState)([]),[p,f]=(0,n.useState)(!0),[g,y]=(0,n.useState)(""),[j,v]=(0,n.useState)(null),[b,w]=(0,n.useState)(""),N=async()=>{let t=localStorage.getItem("token");if(!t){e.push("/login");return}try{f(!0),w("");let s=await fetch("".concat(m.Z,"/api/v1/alerts"),{headers:{Authorization:"Bearer ".concat(t)}});if(401===s.status||403===s.status){e.push("/login");return}let n=await s.json();r(n)}catch(e){console.error("Error fetching alerts:",e),w("Unable to load alerts. Please try again.")}finally{f(!1)}};(0,n.useEffect)(()=>{N()},[]);let k=t.filter(e=>!g||e.status===g),Z=e=>({quota_breach:(0,s.jsx)(i.Z,{size:20}),assessment_due:(0,s.jsx)(c.Z,{size:20}),interview_reminder:(0,s.jsx)(o.Z,{size:20}),backup_failure:(0,s.jsx)(d.Z,{size:20})})[e]||(0,s.jsx)(u,{size:20}),_=(e,t)=>"resolved"===t?"bg-gray-100 text-gray-600":({quota_breach:"bg-red-100 text-red-800",assessment_due:"bg-yellow-100 text-yellow-800",interview_reminder:"bg-blue-100 text-blue-800",backup_failure:"bg-red-100 text-red-800"})[e]||"bg-gray-100 text-gray-800",A=e=>({1:"text-red-600",2:"text-yellow-600",3:"text-blue-600"})[e]||"text-gray-600",T=async(t,s)=>{let n=localStorage.getItem("token");if(!n){e.push("/login");return}try{v(t),w("");let e=await fetch("".concat(m.Z,"/api/v1/alerts/").concat(t,"/").concat(s),{method:"PATCH",headers:{Authorization:"Bearer ".concat(n)}});if(!e.ok){let t=await e.json().catch(()=>({}));throw Error(t.message||"Unable to update alert.")}let l=await e.json();r(e=>e.map(e=>e.id===l.id?l:e))}catch(e){console.error("Error updating alert (".concat(s,"):"),e),w(e.message)}finally{v(null)}},z=e=>T(e,"acknowledge"),E=e=>T(e,"resolve");return p?(0,s.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:"Loading alerts..."}):(0,s.jsxs)("div",{className:"min-h-screen bg-gray-50/50 backdrop-blur-sm p-4 md:p-8",children:[(0,s.jsxs)("div",{className:"mb-8",children:[(0,s.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Alerts & Notifications"}),(0,s.jsx)("p",{className:"text-gray-600 mt-2",children:"Stay updated with important notifications and alerts"})]}),b&&(0,s.jsx)("div",{className:"mb-6 text-sm text-red-600 bg-red-100/80 border border-red-200 rounded-lg p-3",children:b}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-6",children:[(0,s.jsx)(l.Z,{className:"p-6",children:(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)("div",{className:"p-3 rounded-full bg-red-100 text-red-600",children:(0,s.jsx)(u,{size:24})}),(0,s.jsxs)("div",{className:"ml-4",children:[(0,s.jsx)("p",{className:"text-sm font-medium text-gray-500",children:"Total Alerts"}),(0,s.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:t.length})]})]})}),(0,s.jsx)(l.Z,{className:"p-6",children:(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)("div",{className:"p-3 rounded-full bg-yellow-100 text-yellow-600",children:(0,s.jsx)(c.Z,{size:24})}),(0,s.jsxs)("div",{className:"ml-4",children:[(0,s.jsx)("p",{className:"text-sm font-medium text-gray-500",children:"Open"}),(0,s.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:t.filter(e=>"open"===e.status).length})]})]})}),(0,s.jsx)(l.Z,{className:"p-6",children:(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)("div",{className:"p-3 rounded-full bg-blue-100 text-blue-600",children:(0,s.jsx)(x.Z,{size:24})}),(0,s.jsxs)("div",{className:"ml-4",children:[(0,s.jsx)("p",{className:"text-sm font-medium text-gray-500",children:"Acknowledged"}),(0,s.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:t.filter(e=>"acknowledged"===e.status).length})]})]})}),(0,s.jsx)(l.Z,{className:"p-6",children:(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)("div",{className:"p-3 rounded-full bg-green-100 text-green-600",children:(0,s.jsx)(x.Z,{size:24})}),(0,s.jsxs)("div",{className:"ml-4",children:[(0,s.jsx)("p",{className:"text-sm font-medium text-gray-500",children:"Resolved"}),(0,s.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:t.filter(e=>"resolved"===e.status).length})]})]})})]}),(0,s.jsx)(l.Z,{className:"p-6 mb-6",children:(0,s.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,s.jsx)("label",{className:"text-sm font-medium text-gray-700",children:"Filter by status:"}),(0,s.jsxs)("select",{value:g,onChange:e=>y(e.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[(0,s.jsx)("option",{value:"",children:"All Statuses"}),(0,s.jsx)("option",{value:"open",children:"Open"}),(0,s.jsx)("option",{value:"acknowledged",children:"Acknowledged"}),(0,s.jsx)("option",{value:"resolved",children:"Resolved"})]})]})}),(0,s.jsx)("div",{className:"space-y-4",children:0===k.length?(0,s.jsxs)(l.Z,{className:"p-12 text-center",children:[(0,s.jsx)(u,{size:48,className:"mx-auto text-gray-400 mb-4"}),(0,s.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No alerts found"}),(0,s.jsx)("p",{className:"text-gray-500",children:"You're all caught up! No alerts to show."})]}):k.map(e=>(0,s.jsx)(l.Z,{className:"p-6 border-l-4 ".concat("open"===e.status?"border-l-red-500":"acknowledged"===e.status?"border-l-yellow-500":"border-l-green-500"),children:(0,s.jsxs)("div",{className:"flex items-start justify-between",children:[(0,s.jsxs)("div",{className:"flex items-start space-x-4",children:[(0,s.jsx)("div",{className:"p-2 rounded-full ".concat(_(e.alert_type,e.status)),children:Z(e.alert_type)}),(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-2 mb-2",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:e.title}),(0,s.jsxs)("span",{className:"text-xs font-medium ".concat(A(e.priority)),children:["Priority ",e.priority]}),(0,s.jsx)("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full ".concat("open"===e.status?"bg-red-100 text-red-800":"acknowledged"===e.status?"bg-yellow-100 text-yellow-800":"bg-green-100 text-green-800"),children:e.status})]}),(0,s.jsx)("p",{className:"text-gray-600 mb-3",children:e.message}),(0,s.jsxs)("div",{className:"flex items-center space-x-4 text-sm text-gray-500",children:[(0,s.jsxs)("span",{children:["Type: ",e.alert_type.replace("_"," ")]}),(0,s.jsx)("span",{children:"•"}),(0,s.jsxs)("span",{children:["Created: ",new Date(e.created_at).toLocaleString()]}),e.acknowledged_at&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("span",{children:"•"}),(0,s.jsxs)("span",{children:["Acknowledged: ",new Date(e.acknowledged_at).toLocaleString()]})]}),e.resolved_at&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("span",{children:"•"}),(0,s.jsxs)("span",{children:["Resolved: ",new Date(e.resolved_at).toLocaleString()]})]})]})]})]}),(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:["open"===e.status&&(0,s.jsxs)(a.Z,{size:"sm",variant:"outline",disabled:j===e.id,onClick:()=>z(e.id),className:"flex items-center space-x-1",children:[(0,s.jsx)(x.Z,{size:16}),(0,s.jsx)("span",{children:j===e.id?"Updating...":"Acknowledge"})]}),"acknowledged"===e.status&&(0,s.jsxs)(a.Z,{size:"sm",disabled:j===e.id,onClick:()=>E(e.id),className:"flex items-center space-x-1",children:[(0,s.jsx)(x.Z,{size:16}),(0,s.jsx)("span",{children:j===e.id?"Updating...":"Resolve"})]})]})]})},e.id))})]})}},7663:function(e){!function(){var t={229:function(e){var t,r,s,n=e.exports={};function l(){throw Error("setTimeout has not been defined")}function a(){throw Error("clearTimeout has not been defined")}function i(e){if(t===setTimeout)return setTimeout(e,0);if((t===l||!t)&&setTimeout)return t=setTimeout,setTimeout(e,0);try{return t(e,0)}catch(r){try{return t.call(null,e,0)}catch(r){return t.call(this,e,0)}}}!function(){try{t="function"==typeof setTimeout?setTimeout:l}catch(e){t=l}try{r="function"==typeof clearTimeout?clearTimeout:a}catch(e){r=a}}();var c=[],o=!1,d=-1;function u(){o&&s&&(o=!1,s.length?c=s.concat(c):d=-1,c.length&&x())}function x(){if(!o){var e=i(u);o=!0;for(var t=c.length;t;){for(s=c,c=[];++d<t;)s&&s[d].run();d=-1,t=c.length}s=null,o=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===a||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(e)}}function h(e,t){this.fun=e,this.array=t}function m(){}n.nextTick=function(e){var t=Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];c.push(new h(e,t)),1!==c.length||o||i(x)},h.prototype.run=function(){this.fun.apply(null,this.array)},n.title="browser",n.browser=!0,n.env={},n.argv=[],n.version="",n.versions={},n.on=m,n.addListener=m,n.once=m,n.off=m,n.removeListener=m,n.removeAllListeners=m,n.emit=m,n.prependListener=m,n.prependOnceListener=m,n.listeners=function(e){return[]},n.binding=function(e){throw Error("process.binding is not supported")},n.cwd=function(){return"/"},n.chdir=function(e){throw Error("process.chdir is not supported")},n.umask=function(){return 0}}},r={};function s(e){var n=r[e];if(void 0!==n)return n.exports;var l=r[e]={exports:{}},a=!0;try{t[e](l,l.exports,s),a=!1}finally{a&&delete r[e]}return l.exports}s.ab="//";var n=s(229);e.exports=n}()},1163:function(e,t,r){e.exports=r(3079)}},function(e){e.O(0,[888,774,179],function(){return e(e.s=8881)}),_N_E=e.O()}]);