(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[233],{8881:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/alerts",function(){return r(564)}])},8396:function(e,t,r){"use strict";var s=r(5893),a=r(7294),n=r(1664),l=r.n(n),i=r(1163),c=r(2190),o=r(8497),d=r(2761),u=r(8794);t.Z=e=>{let{title:t,subtitle:r,links:n=[],actions:x=null,onBack:f=null,children:m}=e,g=(0,i.useRouter)(),[h,p]=(0,a.useState)(!1);return(0,s.jsxs)("div",{className:"min-h-screen bg-muted/20 flex",children:[(0,s.jsx)("aside",{className:"fixed inset-y-0 left-0 z-30 w-72 bg-background border-r border-border shadow-lg transform transition-transform duration-200 ease-in-out lg:translate-x-0 ".concat(h?"translate-x-0":"-translate-x-full lg:translate-x-0"),children:(0,s.jsxs)("div",{className:"h-full flex flex-col overflow-y-auto",children:[(0,s.jsxs)("div",{className:"px-6 py-5 border-b border-border flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-xs uppercase tracking-wider text-muted-foreground",children:"TeamBuilderz"}),(0,s.jsx)("h2",{className:"text-lg font-semibold text-foreground",children:"Control Center"})]}),(0,s.jsx)(u.z,{variant:"ghost",size:"icon",className:"lg:hidden",onClick:()=>p(!1),children:(0,s.jsx)(c.Z,{size:20})})]}),(0,s.jsx)("nav",{className:"flex-1 px-4 py-6 space-y-2",children:n.map(e=>{let{href:t,label:r,icon:a}=e,n=g.pathname===t;return(0,s.jsxs)(l(),{href:t,onClick:()=>p(!1),className:"flex items-center gap-3 rounded-lg px-4 py-2 text-sm font-medium transition-colors ".concat(n?"bg-primary text-primary-foreground shadow-sm":"text-muted-foreground hover:bg-accent hover:text-accent-foreground"),children:[a&&(0,s.jsx)(a,{size:18}),(0,s.jsx)("span",{children:r})]},t)})})]})}),h&&(0,s.jsx)("div",{className:"fixed inset-0 bg-black/30 backdrop-blur-sm z-20 lg:hidden",onClick:()=>p(!1)}),(0,s.jsxs)("div",{className:"flex-1 lg:ml-72",children:[(0,s.jsx)("header",{className:"sticky top-0 z-10 bg-background/80 backdrop-blur border-b border-border",children:(0,s.jsxs)("div",{className:"px-4 sm:px-6 py-4 flex items-center justify-between gap-4",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)(u.z,{variant:"outline",size:"icon",className:"lg:hidden",onClick:()=>p(!0),children:(0,s.jsx)(o.Z,{size:20})}),f&&(0,s.jsxs)(u.z,{variant:"outline",size:"sm",className:"gap-2",onClick:f,children:[(0,s.jsx)(d.Z,{size:16}),"Back"]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-xl sm:text-2xl font-bold text-foreground",children:t}),r&&(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:r})]})]}),x&&(0,s.jsx)("div",{className:"flex items-center gap-3",children:x})]})}),(0,s.jsx)("main",{className:"px-4 sm:px-6 py-6",children:m})]})]})}},8794:function(e,t,r){"use strict";r.d(t,{z:function(){return o}});var s=r(5893),a=r(7294),n=r(8426),l=r(2003),i=r(7865);let c=(0,l.j)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 ring-offset-background",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),o=a.forwardRef((e,t)=>{let{className:r,variant:a,size:l,asChild:o=!1,...d}=e,u=o?n.g7:"button";return(0,s.jsx)(u,{className:(0,i.cn)(c({variant:a,size:l,className:r})),ref:t,...d})});o.displayName="Button"},8133:function(e,t,r){"use strict";r.d(t,{Ol:function(){return i},SZ:function(){return o},Zb:function(){return l},aY:function(){return d},eW:function(){return u},ll:function(){return c}});var s=r(5893),a=r(7294),n=r(7865);let l=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("div",{ref:t,className:(0,n.cn)("rounded-xl border border-border bg-card text-card-foreground shadow-sm",r),...a})});l.displayName="Card";let i=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("div",{ref:t,className:(0,n.cn)("flex flex-col space-y-1.5 p-6",r),...a})});i.displayName="CardHeader";let c=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("h3",{ref:t,className:(0,n.cn)("text-lg font-semibold leading-none tracking-tight",r),...a})});c.displayName="CardTitle";let o=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("p",{ref:t,className:(0,n.cn)("text-sm text-muted-foreground",r),...a})});o.displayName="CardDescription";let d=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("div",{ref:t,className:(0,n.cn)("p-6 pt-0",r),...a})});d.displayName="CardContent";let u=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("div",{ref:t,className:(0,n.cn)("flex items-center p-6 pt-0",r),...a})});u.displayName="CardFooter"},610:function(e,t,r){"use strict";let s=r(3454).env.NEXT_PUBLIC_API_URL||"http://localhost:3001";t.Z=s},7865:function(e,t,r){"use strict";r.d(t,{cn:function(){return n}});var s=r(512),a=r(8388);function n(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,a.m6)((0,s.W)(t))}},3346:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});let s=(0,r(1134).Z)("calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]])},3050:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});let s=(0,r(1134).Z)("circle-check-big",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},39:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});let s=(0,r(1134).Z)("clock",[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]])},113:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});let s=(0,r(1134).Z)("target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]])},9176:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});let s=(0,r(1134).Z)("users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]])},564:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return v}});var s=r(5893),a=r(7294),n=r(1163),l=r(6215),i=r(2553),c=r(2542),o=r(9176),d=r(113),u=r(39),x=r(3346);let f=(0,r(1134).Z)("bell",[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]]);var m=r(3050),g=r(8133),h=r(8794),p=r(8396),b=r(610);let j=e=>{let{icon:t,title:r,value:a,color:n}=e;return(0,s.jsxs)(g.Zb,{className:"p-6 flex items-center gap-3",children:[(0,s.jsx)("div",{className:"w-11 h-11 rounded-full flex items-center justify-center ".concat(n),children:t}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-xs font-medium text-muted-foreground uppercase tracking-wide",children:r}),(0,s.jsx)("p",{className:"text-2xl font-semibold text-foreground",children:a})]})]})};var v=()=>{let e=(0,n.useRouter)(),[t,r]=(0,a.useState)([]),[v,y]=(0,a.useState)(!0),[N,k]=(0,a.useState)(""),[w,Z]=(0,a.useState)(null),[z,_]=(0,a.useState)(""),[C,A]=(0,a.useState)("Admin"),R=async()=>{let t=localStorage.getItem("token");if(!t){e.push("/login");return}try{y(!0),_("");let s=await fetch("".concat(b.Z,"/api/v1/alerts"),{headers:{Authorization:"Bearer ".concat(t)}});if(401===s.status||403===s.status){e.push("/login");return}let a=await s.json();r(a)}catch(e){console.error("Error fetching alerts:",e),_("Unable to load alerts. Please try again.")}finally{y(!1)}};(0,a.useEffect)(()=>{{let e=localStorage.getItem("userRole");e&&A(e)}R()},[]);let S=(0,a.useMemo)(()=>t.filter(e=>!N||e.status===N),[t,N]),M=(0,a.useMemo)(()=>"Recruiter"===C?[{href:"/recruiter",label:"Dashboard",icon:l.Z},{href:"/recruiter/applications",label:"Applications",icon:i.Z},{href:"/alerts",label:"Alerts",icon:c.Z}]:[{href:"/admin",label:"Dashboard",icon:l.Z},{href:"/admin/candidates",label:"Candidates",icon:o.Z},{href:"/recruiter/applications",label:"Applications",icon:i.Z},{href:"/alerts",label:"Alerts",icon:c.Z}],[C]),E=e=>({quota_breach:(0,s.jsx)(d.Z,{size:20}),assessment_due:(0,s.jsx)(u.Z,{size:20}),interview_reminder:(0,s.jsx)(x.Z,{size:20}),backup_failure:(0,s.jsx)(c.Z,{size:20})})[e]||(0,s.jsx)(f,{size:20}),T=(e,t)=>"resolved"===t?"bg-gray-100 text-gray-600":({quota_breach:"bg-red-100 text-red-800",assessment_due:"bg-yellow-100 text-yellow-800",interview_reminder:"bg-blue-100 text-blue-800",backup_failure:"bg-red-100 text-red-800"})[e]||"bg-gray-100 text-gray-800",L=e=>({1:"text-red-600",2:"text-yellow-600",3:"text-blue-600"})[e]||"text-gray-600",P=async(t,s)=>{let a=localStorage.getItem("token");if(!a){e.push("/login");return}try{Z(t),_("");let e=await fetch("".concat(b.Z,"/api/v1/alerts/").concat(t,"/").concat(s),{method:"PATCH",headers:{Authorization:"Bearer ".concat(a)}});if(!e.ok){let t=await e.json().catch(()=>({}));throw Error(t.message||"Unable to update alert.")}let n=await e.json();r(e=>e.map(e=>e.id===n.id?n:e))}catch(e){console.error("Error updating alert (".concat(s,"):"),e),_(e.message)}finally{Z(null)}},B=e=>P(e,"acknowledge"),D=e=>P(e,"resolve");return v?(0,s.jsx)(p.Z,{title:"Alerts & Notifications",subtitle:"Monitoring system events",links:M,children:(0,s.jsx)("div",{className:"h-48 flex items-center justify-center text-muted-foreground",children:"Loading alerts…"})}):(0,s.jsxs)(p.Z,{title:"Alerts & Notifications",subtitle:"Stay ahead of quota breaches, assessment deadlines, and interview reminders.",links:M,children:[z&&(0,s.jsx)("div",{className:"mb-6 text-sm text-red-600 bg-red-100/80 border border-red-200 rounded-lg p-3",children:z}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6",children:[(0,s.jsx)(j,{icon:(0,s.jsx)(f,{size:24}),title:"Total Alerts",value:t.length,color:"bg-blue-100 text-blue-600"}),(0,s.jsx)(j,{icon:(0,s.jsx)(c.Z,{size:24}),title:"Open",value:t.filter(e=>"open"===e.status).length,color:"bg-red-100 text-red-600"}),(0,s.jsx)(j,{icon:(0,s.jsx)(u.Z,{size:24}),title:"Acknowledged",value:t.filter(e=>"acknowledged"===e.status).length,color:"bg-yellow-100 text-yellow-600"}),(0,s.jsx)(j,{icon:(0,s.jsx)(m.Z,{size:24}),title:"Resolved",value:t.filter(e=>"resolved"===e.status).length,color:"bg-green-100 text-green-600"})]}),(0,s.jsx)(g.Zb,{className:"p-6 mb-6",children:(0,s.jsxs)("div",{className:"flex flex-wrap items-center gap-3",children:[(0,s.jsx)("label",{className:"text-sm font-medium text-muted-foreground",children:"Filter by status"}),(0,s.jsxs)("select",{value:N,onChange:e=>k(e.target.value),className:"px-4 py-2 border border-border rounded-lg bg-background focus:outline-none focus:ring-2 focus:ring-primary/40",children:[(0,s.jsx)("option",{value:"",children:"All Statuses"}),(0,s.jsx)("option",{value:"open",children:"Open"}),(0,s.jsx)("option",{value:"acknowledged",children:"Acknowledged"}),(0,s.jsx)("option",{value:"resolved",children:"Resolved"})]}),(0,s.jsx)(h.z,{variant:"ghost",onClick:()=>k(""),children:"Reset"})]})}),(0,s.jsx)("div",{className:"space-y-4",children:0===S.length?(0,s.jsxs)(g.Zb,{className:"p-12 text-center",children:[(0,s.jsx)(f,{size:48,className:"mx-auto text-muted-foreground mb-4"}),(0,s.jsx)("h3",{className:"text-lg font-medium text-foreground mb-2",children:"No alerts found"}),(0,s.jsx)("p",{className:"text-muted-foreground",children:"You're all caught up! No alerts to show."})]}):S.map(e=>(0,s.jsx)(g.Zb,{className:"p-6 border-l-4 ".concat("open"===e.status?"border-l-red-500":"acknowledged"===e.status?"border-l-yellow-500":"border-l-green-500"),children:(0,s.jsxs)("div",{className:"flex flex-col md:flex-row md:items-start md:justify-between gap-4",children:[(0,s.jsxs)("div",{className:"flex items-start gap-4",children:[(0,s.jsx)("div",{className:"p-2 rounded-full ".concat(T(e.alert_type,e.status)),children:E(e.alert_type)}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsxs)("div",{className:"flex flex-wrap items-center gap-2",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold text-foreground",children:e.title}),(0,s.jsxs)("span",{className:"text-xs font-medium ".concat(L(e.priority)),children:["Priority ",e.priority]}),(0,s.jsx)("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full ".concat("open"===e.status?"bg-red-100 text-red-800":"acknowledged"===e.status?"bg-yellow-100 text-yellow-800":"bg-green-100 text-green-800"),children:e.status})]}),(0,s.jsx)("p",{className:"text-muted-foreground",children:e.message}),(0,s.jsxs)("div",{className:"flex flex-wrap items-center gap-3 text-xs text-muted-foreground",children:[(0,s.jsxs)("span",{children:["Type: ",e.alert_type.replace("_"," ")]}),(0,s.jsx)("span",{children:"•"}),(0,s.jsxs)("span",{children:["Created: ",new Date(e.created_at).toLocaleString()]}),e.acknowledged_at&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("span",{children:"•"}),(0,s.jsxs)("span",{children:["Acknowledged: ",new Date(e.acknowledged_at).toLocaleString()]})]}),e.resolved_at&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("span",{children:"•"}),(0,s.jsxs)("span",{children:["Resolved: ",new Date(e.resolved_at).toLocaleString()]})]})]})]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:["open"===e.status&&(0,s.jsx)(h.z,{variant:"outline",disabled:w===e.id,onClick:()=>B(e.id),children:w===e.id?"Updating…":"Acknowledge"}),"acknowledged"===e.status&&(0,s.jsx)(h.z,{disabled:w===e.id,onClick:()=>D(e.id),children:w===e.id?"Updating…":"Resolve"})]})]})},e.id))})]})}}},function(e){e.O(0,[516,787,888,774,179],function(){return e(e.s=8881)}),_N_E=e.O()}]);