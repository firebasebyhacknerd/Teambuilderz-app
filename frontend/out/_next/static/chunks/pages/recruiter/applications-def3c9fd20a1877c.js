(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[625],{6718:function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/recruiter/applications",function(){return a(8878)}])},9376:function(e,t,a){"use strict";a.d(t,{I:function(){return r}});var s=a(5893),n=a(7294),i=a(7865);let r=n.forwardRef((e,t)=>{let{className:a,type:n="text",...r}=e;return(0,s.jsx)("input",{type:n,className:(0,i.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",a),ref:t,...r})});r.displayName="Input"},9701:function(e,t,a){"use strict";var s=a(5893),n=a(7294),i=a(7865);let r=n.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,s.jsx)("textarea",{ref:t,className:(0,i.cn)("flex min-h-[120px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm text-foreground","placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2","disabled:cursor-not-allowed disabled:opacity-50",a),...n})});r.displayName="Textarea",t.Z=r},775:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});let s=(0,a(1134).Z)("log-out",[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]])},9176:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});let s=(0,a(1134).Z)("users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]])},8878:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return v}});var s=a(5893),n=a(7294),i=a(1163),r=a(6215),l=a(9176),o=a(2553),d=a(2542),c=a(775);let u=(0,a(1134).Z)("funnel",[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]]);var p=a(8396),m=a(8133),x=a(8794),f=a(9376),h=a(9701),g=a(9864);let b=["sent","viewed","shortlisted","interviewing","offered","hired","rejected"],j=e=>{let{label:t,value:a}=e;return(0,s.jsxs)("div",{className:"rounded-lg border border-border bg-card p-4 shadow-sm",children:[(0,s.jsx)("p",{className:"text-xs font-medium text-muted-foreground uppercase tracking-wide",children:t}),(0,s.jsx)("p",{className:"mt-2 text-xl font-semibold text-foreground",children:a})]})};var v=()=>{let e=(0,i.useRouter)(),[t,a]=(0,n.useState)(""),[v,N]=(0,n.useState)(""),[y,w]=(0,n.useState)(""),[C,k]=(0,n.useState)("Recruiter"),[_,S]=(0,n.useState)("Recruiter"),[A,R]=(0,n.useState)(null),I=()=>({candidateId:"",applicationsCount:60,applicationDate:new Date().toISOString().split("T")[0],reductionReason:""}),[Z,L]=(0,n.useState)(I);(0,n.useEffect)(()=>{let t=localStorage.getItem("token");if(!t){e.push("/login");return}a(t);let s=localStorage.getItem("userRole")||"Recruiter",n=localStorage.getItem("userName");S(s),n&&k(n)},[e]);let{data:z=[],isLoading:D,isRefetching:M}=(0,g.p$)(t),{data:q=[],isLoading:P}=(0,g.t$)(t),E=(0,g.ju)(t,{onSuccess:()=>{R({type:"success",text:"Application logged successfully."}),$()},onError:e=>{R({type:"error",text:e.message||"Unable to log application."})}}),T=(0,n.useMemo)(()=>{let e=v.trim().toLowerCase();return z.filter(t=>{let a=!e||[t.candidate_name,t.company_name,t.job_title,t.channel,t.status].filter(Boolean).some(t=>t.toLowerCase().includes(e)),s=!y||t.status===y;return a&&s})},[z,v,y]),O=T.reduce((e,t)=>e+(Number(t.applications_count)||0),0),H=60>Number(Z.applicationsCount||0);(0,n.useEffect)(()=>{!H&&Z.reductionReason&&L(e=>({...e,reductionReason:""}))},[H,Z.reductionReason]);let F=(0,n.useMemo)(()=>"Admin"===_?[{href:"/admin",label:"Dashboard",icon:r.Z},{href:"/admin/candidates",label:"Candidates",icon:l.Z},{href:"/recruiter/applications",label:"Applications",icon:o.Z},{href:"/alerts",label:"Alerts",icon:d.Z}]:[{href:"/recruiter",label:"Dashboard",icon:r.Z},{href:"/recruiter/applications",label:"Applications",icon:o.Z},{href:"/alerts",label:"Alerts",icon:d.Z}],[_]),G=t=>{t&&e.push("/recruiter/candidate/".concat(t))},U=e=>t=>{let a=t.target.value;L(t=>({...t,[e]:a})),A&&R(null)},X=e=>{L(t=>({...t,applicationsCount:e})),A&&R(null)},$=()=>{L(I()),R(null)};return(0,s.jsx)(p.Z,{title:"Applications",subtitle:"Overview of recent submissions".concat(v?' matching "'.concat(v,'"'):""),links:F,actions:(0,s.jsxs)(x.z,{variant:"outline",onClick:()=>{localStorage.removeItem("token"),localStorage.removeItem("userRole"),localStorage.removeItem("userName"),e.push("/login")},className:"flex items-center gap-2",children:[(0,s.jsx)(c.Z,{size:16}),"Logout"]}),children:(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)(m.Zb,{className:"p-6 space-y-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{className:"text-lg font-semibold text-foreground",children:"Log New Application"}),(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:"Log today's outreach volume. Target is 60 applicationsâ€”add a quick note if you logged fewer."})]}),A&&(0,s.jsx)("div",{className:"rounded-md border px-4 py-3 text-sm ".concat("success"===A.type?"border-green-200 bg-green-50 text-green-800":"border-red-200 bg-red-50 text-red-800"),children:A.text}),(0,s.jsxs)("form",{className:"space-y-6",onSubmit:e=>{if(e.preventDefault(),!t||E.isPending)return;R(null);let a=Math.max(Number(Z.applicationsCount)||0,0);if(!Z.candidateId){R({type:"error",text:"Please select a candidate to attribute these applications."});return}if(a<60&&!Z.reductionReason.trim()){R({type:"error",text:"Please provide a short reason when logging fewer than 60 applications."});return}let s=q.find(e=>e.id===Number(Z.candidateId)),n=(null==s?void 0:s.name)||"General Application",i=Z.reductionReason.trim(),r={candidate_id:Number(Z.candidateId),company_name:"".concat(n," Outreach"),job_title:"General Application",job_description:i?"Reduced quota reason: ".concat(i):void 0,channel:"Not specified",status:"sent",applications_count:Math.max(a,0),application_date:Z.applicationDate||void 0};E.mutate({application:r,includeInterview:!1,includeAssessment:!1,interview:null,assessment:null})},children:[(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)("label",{className:"text-sm font-medium text-foreground",children:"Candidate"}),(0,s.jsxs)("select",{className:"w-full rounded-md border border-input bg-background px-3 py-2 text-sm text-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",value:Z.candidateId,onChange:U("candidateId"),required:!0,children:[(0,s.jsx)("option",{value:"",children:"Select candidate"}),q.map(e=>(0,s.jsx)("option",{value:e.id,children:e.name},e.id))]}),(0,s.jsx)("p",{className:"text-xs text-muted-foreground",children:"Choose who you advanced today."})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)("label",{className:"text-sm font-medium text-foreground",children:"Applications Logged"}),(0,s.jsx)(f.I,{type:"number",min:0,value:Z.applicationsCount,onChange:U("applicationsCount"),required:!0}),(0,s.jsxs)("div",{className:"flex flex-wrap gap-2 pt-1",children:[[60,80,100].map(e=>(0,s.jsx)(x.z,{type:"button",variant:"secondary",size:"sm",onClick:()=>X(e),children:e},e)),(0,s.jsx)(x.z,{type:"button",variant:"ghost",size:"sm",onClick:()=>X(Math.max(0,(Number(Z.applicationsCount)||0)+10)),children:"+10"})]})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)("label",{className:"text-sm font-medium text-foreground",children:"Date"}),(0,s.jsx)(f.I,{type:"date",value:Z.applicationDate,onChange:U("applicationDate"),required:!0})]}),H&&(0,s.jsxs)("div",{className:"space-y-2 md:col-span-2",children:[(0,s.jsx)("label",{className:"text-sm font-medium text-foreground",children:"Reason for fewer than 60 applications"}),(0,s.jsx)(h.Z,{value:Z.reductionReason,onChange:U("reductionReason"),placeholder:"Share why today's quota is reduced (e.g., interview day, sourcing research, PTO).",rows:3,required:!0}),(0,s.jsx)("p",{className:"text-xs text-muted-foreground",children:"Admins use this to track quota adjustments. Keep it brief but clear."})]})]}),(0,s.jsxs)("div",{className:"flex justify-end gap-3 pt-2",children:[(0,s.jsx)(x.z,{type:"button",variant:"outline",onClick:$,disabled:E.isPending,children:"Reset"}),(0,s.jsx)(x.z,{type:"submit",disabled:E.isPending,children:E.isPending?"Logging...":"Log Application"})]})]})]}),(0,s.jsxs)(m.Zb,{className:"p-6 space-y-4",children:[(0,s.jsxs)("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:"Signed in as"}),(0,s.jsx)("h2",{className:"text-xl font-semibold text-foreground",children:C})]}),(0,s.jsxs)("div",{className:"flex flex-col sm:flex-row gap-3 w-full md:w-auto",children:[(0,s.jsxs)("div",{className:"relative flex-1",children:[(0,s.jsx)(f.I,{placeholder:"Search applications...",value:v,onChange:e=>N(e.target.value),className:"pl-10"}),(0,s.jsx)(u,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"})]}),(0,s.jsxs)("select",{className:"border border-border rounded-md px-3 py-2 text-sm bg-background text-foreground",value:y,onChange:e=>w(e.target.value),children:[(0,s.jsx)("option",{value:"",children:"All Statuses"}),b.map(e=>(0,s.jsx)("option",{value:e,children:e.charAt(0).toUpperCase()+e.slice(1)},e))]})]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[(0,s.jsx)(j,{label:"Filtered Applications",value:T.length}),(0,s.jsx)(j,{label:"Total Count (Filtered)",value:O}),(0,s.jsx)(j,{label:"Active Filters",value:y?1:0})]})]}),(0,s.jsx)(m.Zb,{className:"overflow-hidden",children:D||P||M?(0,s.jsx)("div",{className:"p-6 text-center text-muted-foreground",children:"Loading applications..."}):0===T.length?(0,s.jsx)("div",{className:"p-8 text-center text-muted-foreground",children:"No applications found. Adjust filters or add a new submission."}):(0,s.jsx)("div",{className:"overflow-x-auto",children:(0,s.jsxs)("table",{className:"w-full text-sm",children:[(0,s.jsx)("thead",{className:"bg-muted/50 text-muted-foreground",children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{className:"px-4 py-3 text-left font-medium",children:"Candidate"}),(0,s.jsx)("th",{className:"px-4 py-3 text-left font-medium",children:"Company"}),(0,s.jsx)("th",{className:"px-4 py-3 text-left font-medium",children:"Job Title"}),(0,s.jsx)("th",{className:"px-4 py-3 text-left font-medium",children:"Channel"}),(0,s.jsx)("th",{className:"px-4 py-3 text-left font-medium",children:"Status"}),(0,s.jsx)("th",{className:"px-4 py-3 text-left font-medium",children:"Applied On"}),(0,s.jsx)("th",{className:"px-4 py-3 text-right font-medium",children:"Count"})]})}),(0,s.jsx)("tbody",{children:T.map(e=>(0,s.jsxs)("tr",{className:"border-b border-border hover:bg-accent/60 transition cursor-pointer",onClick:()=>G(e.candidate_id),children:[(0,s.jsx)("td",{className:"px-4 py-3 text-foreground",children:e.candidate_name||"--"}),(0,s.jsx)("td",{className:"px-4 py-3 text-foreground",children:e.company_name||"--"}),(0,s.jsx)("td",{className:"px-4 py-3 text-foreground",children:e.job_title||"--"}),(0,s.jsx)("td",{className:"px-4 py-3 capitalize text-muted-foreground",children:e.channel||"--"}),(0,s.jsx)("td",{className:"px-4 py-3 capitalize text-muted-foreground",children:e.status||"--"}),(0,s.jsx)("td",{className:"px-4 py-3 text-muted-foreground",children:e.application_date?new Date(e.application_date).toLocaleDateString():"--"}),(0,s.jsx)("td",{className:"px-4 py-3 text-right text-foreground font-medium",children:e.applications_count||0})]},e.id))})]})})})]})})}}},function(e){e.O(0,[696,787,803,858,888,774,179],function(){return e(e.s=6718)}),_N_E=e.O()}]);